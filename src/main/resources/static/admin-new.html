<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - E-Commerce Store</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>ðŸ›’ E-Commerce Store - Admin</h1>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Products</a>
                <a href="cart.html" class="nav-link">Cart</a>
                <a href="orders.html" class="nav-link">Orders</a>
                <a href="admin.html" class="nav-link active">Admin</a>
                <span id="user-info" class="user-info"></span>
                <button id="logout-btn" class="btn btn-logout" style="display: none;">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="admin-content">
            <div class="admin-header">
                <h2>Admin Dashboard</h2>
            </div>

            <!-- Tab Navigation -->
            <div class="tabs">
                <button class="tab-btn active" onclick="showSection('products')">Products</button>
                <button class="tab-btn" onclick="showSection('categories')">Categories</button>
                <button class="tab-btn" onclick="showSection('users')">Users</button>
                <button class="tab-btn" onclick="showSection('orders')">All Orders</button>
            </div>

            <!-- Products Tab -->
            <div id="products-section" class="admin-section">
                <div class="section-header">
                    <h3>Products Management</h3>
                    <button class="btn btn-primary" onclick="showProductForm()">+ Add Product</button>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>SKU</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="products-table-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Categories Tab -->
            <div id="categories-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h3>Categories Management</h3>
                    <button class="btn btn-primary" onclick="showCategoryForm()">+ Add Category</button>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Description</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="categories-table-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Users Tab -->
            <div id="users-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h3>User Management</h3>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Name</th>
                                <th>Roles</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="orders-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h3>All Orders</h3>
                    <div class="filter-group">
                        <select id="order-status-filter" class="form-input" onchange="filterOrders()">
                            <option value="">All Status</option>
                            <option value="PENDING">Pending</option>
                            <option value="PROCESSING">Processing</option>
                            <option value="SHIPPED">Shipped</option>
                            <option value="DELIVERED">Delivered</option>
                            <option value="CANCELLED">Cancelled</option>
                        </select>
                    </div>
                </div>
                <div id="orders-list"></div>
            </div>
        </div>

        <div id="login-required" class="info-box" style="display: none;">
            <p>Please <a href="login.html">login as admin</a> to access the admin panel.</p>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-form-title">Add Product</h3>
                <span class="close" onclick="closeProductModal()">&times;</span>
            </div>
            <form id="product-form" class="admin-form">
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="product-name" required class="form-input">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="product-description" rows="3" class="form-input"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Price *</label>
                        <input type="number" id="product-price" step="0.01" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label>SKU *</label>
                        <input type="text" id="product-sku" required class="form-input">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Stock Quantity *</label>
                        <input type="number" id="product-stock" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Category *</label>
                        <select id="product-category" required class="form-input">
                            <option value="">Select Category</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Image URL</label>
                    <input type="url" id="product-image" class="form-input">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="product-active" checked>
                        Active
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="category-form-title">Add Category</h3>
                <span class="close" onclick="closeCategoryModal()">&times;</span>
            </div>
            <form id="category-form" class="admin-form">
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="category-name" required class="form-input">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="category-description" rows="3" class="form-input"></textarea>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="category-active" checked>
                        Active
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Edit Modal -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit User</h3>
                <span class="close" onclick="closeUserModal()">&times;</span>
            </div>
            <form id="user-form" class="admin-form">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="user-username" readonly class="form-input">
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="user-email" required class="form-input">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" id="user-firstname" class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" id="user-lastname" class="form-input">
                    </div>
                </div>
                <div class="form-group">
                    <label>Roles</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="role-user" value="USER">
                            User
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="role-admin" value="ADMIN">
                            Admin
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="user-active">
                        Active
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeUserModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Stock Update Modal -->
    <div id="stock-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update Stock</h3>
                <span class="close" onclick="closeStockModal()">&times;</span>
            </div>
            <form id="stock-form" class="admin-form">
                <div class="form-group">
                    <label>Product</label>
                    <input type="text" id="stock-product-name" readonly class="form-input">
                </div>
                <div class="form-group">
                    <label>Current Stock</label>
                    <input type="number" id="stock-current" readonly class="form-input">
                </div>
                <div class="form-group">
                    <label>New Stock Quantity *</label>
                    <input type="number" id="stock-new" required min="0" class="form-input">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeStockModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Stock</button>
                </div>
            </form>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/admin-new.js"></script>
</body>
</html>
